# Automated Deployment with LaTeX CV Generation

This site uses GitHub Actions to automatically build and deploy the website with a compiled LaTeX CV.

## How It Works

The deployment pipeline follows these steps:

1. **Build Jekyll**: Generates the HTML site and processes `cv.tex` with your data from `_data/cv.yaml`
2. **Compile LaTeX**: Converts `cv.tex` into a professional PDF using `latexmk`
3. **Inject PDF**: Moves the compiled PDF to `/assets/cv.pdf`
4. **Deploy**: Publishes the entire site (HTML + PDF) to GitHub Pages

## GitHub Pages Configuration

**Important**: You must configure your repository to use GitHub Actions for deployment.

1. Go to your repository on GitHub
2. Click **Settings** → **Pages**
3. Under **Build and deployment** → **Source**, select **GitHub Actions**

## Workflow File

The workflow is defined in `.github/workflows/build-and-deploy.yml`.

### Triggers

The workflow runs automatically when:
- You push changes to the `main` branch
- You manually trigger it from the Actions tab (workflow_dispatch)

### Jobs

**Build Job:**
- Checks out the repository
- Sets up Ruby and installs dependencies
- Builds the Jekyll site
- Compiles the LaTeX CV to PDF
- Uploads the site as an artifact

**Deploy Job:**
- Takes the built site
- Deploys it to GitHub Pages

## Using the CV on Your Site

After deployment, the PDF is available at:

```
https://yourusername.github.io/assets/cv.pdf
```

The HTML CV page at `/cv.html` includes both:
- A "Download PDF" button (LaTeX-compiled version)
- A "Print from Browser" button (converts HTML to PDF)

## Updating Your CV

1. Edit your CV data in `_data/cv.yaml`
2. Commit and push to the `main` branch
3. GitHub Actions automatically rebuilds and deploys
4. Within minutes, your live site has the updated CV (both HTML and PDF)

## LaTeX Template

The LaTeX template is in `cv.tex`. It uses Jekyll's Liquid templating to pull data from `_data/cv.yaml`, so you only need to maintain one data source.

### Template Features

- Compact, professional formatting
- Letter-sized paper (US standard)
- Optimized margins for maximum content
- Hyperlinked email, LinkedIn, and GitHub
- Matches the styling of the HTML CV

## Monitoring Builds

To see the status of deployments:

1. Go to the **Actions** tab in your GitHub repository
2. Click on the latest workflow run
3. View logs for each step (Build, Compile LaTeX, Deploy)

## Troubleshooting

### PDF Not Updating

- Check the Actions tab for errors
- Ensure you're pushing to the `main` branch
- Verify GitHub Pages is set to "GitHub Actions" source

### LaTeX Compilation Errors

- Check the "Compile LaTeX CV" step in Actions logs
- Ensure special characters in `cv.yaml` are properly escaped
- LaTeX uses `&`, `%`, `$`, `_` as special characters - escape them with backslash if needed

### Build Fails

- Check Ruby version in workflow matches your Gemfile
- Ensure all dependencies are in Gemfile.lock
- Review the Jekyll build logs in the Actions tab

## Local Testing

To test the LaTeX compilation locally (requires LaTeX installation):

```bash
# Build the Jekyll site
bundle exec jekyll build

# Compile the LaTeX CV
cd _site/assets/pdf
latexmk -pdf -file-line-error -interaction=nonstopmode cv.tex
```

## File Structure

```
.
├── .github/
│   └── workflows/
│       └── build-and-deploy.yml   # Deployment workflow
├── _data/
│   └── cv.yaml                    # CV data (single source of truth)
├── _layouts/
│   └── cv.html                    # HTML CV layout
├── cv.html                        # HTML CV page
├── cv.tex                         # LaTeX CV template
└── assets/
    └── cv.pdf                     # Generated by GitHub Actions
```

## Benefits Over Manual Deployment

- **Zero Manual Work**: Push changes, get updated site
- **Always in Sync**: HTML and PDF CVs always match
- **Professional PDF**: LaTeX produces publication-quality output
- **Version Control**: Every CV update is tracked in Git
- **Free Hosting**: GitHub provides unlimited bandwidth
- **Fast**: Builds complete in 2-3 minutes

## Advanced: Modifying the LaTeX Template

If you want to customize the PDF styling:

1. Edit `cv.tex`
2. Modify LaTeX commands (fonts, spacing, colors)
3. Test locally with `latexmk`
4. Push changes - GitHub Actions will use your new template

The template uses:
- `geometry` package for margins
- `titlesec` for section formatting
- `hyperref` for clickable links
- `enumitem` for list spacing
- `fontspec` for custom fonts

## Notes

- The workflow requires the `xu-cheng/latex-action@v3` action, which includes a full TeX Live distribution
- First-time builds may take 3-4 minutes as GitHub caches dependencies
- Subsequent builds are faster (1-2 minutes)
- The PDF is regenerated on every deployment, ensuring it's always current
